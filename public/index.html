<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script>
function test() {
    navigator.geolocation.getCurrentPosition(test2);
}

function test2(position) {
    s = "";
    var geo_text = "緯度:" + position.coords.latitude + "\n";
    geo_text += "経度:" + position.coords.longitude + "\n";

    //la = Math.floor(position.coords.latitude)
    la = Math.floor( position.coords.latitude * Math.pow( 10, 2 ) ) / Math.pow( 10, 2 ) ;
    //lo = Math.floor(position.coords.longitude)
    lo= Math.floor( position.coords.longitude * Math.pow( 10, 2 ) ) / Math.pow( 10, 2 ) ;

    
    if (la == 35.32 && lo == 139.56) {
        //正解
        l = "/Kamakura_Quiz.html";
        setTimeout(function(){window.open('/Kamakura_Quiz.html');}, 2*1000);
        s = "沼田家のクイズ";
    }else if(la == 35.59 && lo == 139.60){
        l = "/Kamakura_Quiz.html";
        setTimeout(function(){window.open('/Kamakura_Quiz.html');}, 2*1000);
        s = "三田家のクイズ";
    } else {
        l = "";
        s = "クイズがありません";
    }
    document.getElementById("text_q").innerHTML = s;


    /*
    geo_text += "高度:" + position.coords.altitude + "\n";
    geo_text += "位置精度:" + position.coords.accuracy + "\n";
    geo_text += "高度精度:" + position.coords.altitudeAccuracy  + "\n";
    geo_text += "移動方向:" + position.coords.heading + "\n";
    geo_text += "速度:" + position.coords.speed + "\n";

    var date = new Date(position.timestamp);

    geo_text += "取得時刻:" + date.toLocaleString() + "\n";

    alert(geo_text);
    */

}
</script>
</head>
<body>

<button onclick="test()">クイズを探す</button>
<div id="text_q"></div>
<div id="user_name"></div>

<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
  liff.init({
    liffId: '1657230531-EW5Dv37V', // Use own liffId
    withLoginOnExternalBrowser: true, // Enable automatic login process
  }).then(() => {
    const idToken = liff.getDecodedIDToken();
    s = idToken['name']
    document.getElementById("user_name").innerHTML = s;
  });
</script>

</body>
</html>